---
title: 部署兰空图床
authot: lincc
date: 2024-07-11 周四
time: 10:00
tags:
---
## 准备环境
- [参考](https://www.bilibili.com/video/BV1MZ421B7fp?vd_source=deddb91e10f390b194e9282bbab93e96)
- 使用宝塔面板, 在软件商店中安装 nginx , mysql5.7, php 8.0 以上版本
- 打卡 php 设置, 安装 fileinfo、imagemagick 这两个扩展
- 在禁用函数页面中，删除exec、shell_exec、readlink、symlink、putenv、getenv、chmod、chown、fileperms 这几个函数
- 最后重启 php 服务
## 添加站点
- 在宝塔的 php 项目中，添加一个传统站点
- 输入域名或者`ip 地址，创建一个 mysql 数据库, 输入数据库账号, php 选择刚才设置过的版本
- 从 [github](https://github.com/lsky-org/lsky-pro/releases)下载最新的压缩包
- 解压到站点的根目录
- 回到网站页面进行站点设置
	- 网站目录中的 运行目录设置为 `/public`, 然后保存
	- 关闭防跨站攻击
	- 从[官方文档](https://docs.lsky.pro/docs/free/v2/quick-start/installation.html#%E5%87%86%E5%A4%87%E5%AE%89%E8%A3%85)中找到设置伪静态的代码粘贴到宝塔站点的伪静态设置中, 保存
	- 伪静态: 
```shell
location / {
  try_files $uri $uri/ /index.php?$query_string;
}
```
## 设置站点
- 访问设置好的域名，进入兰空的运行环境检测，没问题就下一步
- 数据库选 mysql 5.7
- 去宝塔的数据库页面复制数据库名称、用户名、密码
- 输入自己的邮箱和自定义密码

